<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: types.ts</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: types.ts</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import type { Endpoints } from '@octokit/types'
import type { SchemaObject } from 'ajv'
import type { TocEntry } from './lib/toc'
import type { GET_TREE_REQ } from './constants'
import path from 'path'

export type WithRequired&lt;T, K extends keyof T> = T &amp; { [P in K]-?: T[P] }

/**
 * Options when instantiating instace of class
 */
export interface GitCMSSettings {
  /**
   * GitHub API Key
   *
   * @see https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens
   */
  apiKey: string
  /**
   * Owner of the repo you're sourcing from
   *
   */
  owner: string
  /**
   * Repo name your're sourcing from
   */
  repo: string
  /**
   * Path to folder to start sourcing content
   */
  srcPath: string
  /**
   * Optional JSON schema to validate frontmatter data against
   */
  schema?: SchemaObject
}

export type GetTreeResData = Endpoints[typeof GET_TREE_REQ]['response']['data']

/**
 * Options when listing content from repository
 */
export interface ListFilesOptions {
  /**
   * file extensions to include in results
   */
  extensions?: ('.md' | '.mdx')[]
  /**
   * Starting path to begin traversal of file structure.
   * Default to `srcPath` from constructor.
   */
  path?: string
  /**
   * Whether to recursive through file structure
   */
  recursive?: boolean
  /**
   * Whether to append raw content to obj
   */
  includeContent?: boolean
  /**
   * Whether to sort dates by ascending or not
   */
  ascending?: boolean
  /**
   * Which dates to sort list by
   */
  sortBy?: 'updated' | 'created'
}

export interface TreeItem extends Required&lt;GetTreeResData['tree'][0]> {
  children?: Record&lt;string, TreeItem>
}

export type FileListItem = Required&lt;Omit&lt;GetTreeResData['tree'][0], 'mode' | 'type'>>

type PathObj = Pick&lt;ReturnType&lt;typeof path.posix.parse>, 'dir' | 'ext' | 'name'>

/**
 * Resulting item representing content from repository
 */
export interface FileListOject&lt;FrontMatter> extends Omit&lt;FileListItem, 'path'> {
  /**
   * Title of document. Sourced from first heading element.
   */
  title: string | null
  /**
   * Amount of time to read. Rough calculation based on file byte size.
   */
  reading_time: number
  /**
   * Creation date of item. Sourced from first commit.
   */
  created: string | undefined
  /**
   * Updated date of item. Sourced from last commit.
   */
  updated: string | undefined
  /**
   * Frontmatter data in document.
   */
  frontmatter: FrontMatter
  /**
   * Table of contents of document.
   */
  toc: TocEntry[]
  /**
   * Raw markup.
   */
  content?: string
  /**
   * Split items from path string.
   */
  path: PathObj
  /**
   * Full path string to item from root of repository.
   */
  full_path: string
}

/**
 * Options for `getItemBySha`
 */
export interface GetContentByShaOpt {
  /**
   * SHA value of item
   */
  sha: string
  /**
   * Optional schema to validated fronmatter against
   */
  schema?: SchemaObject
}

/**
 * Options for `getItemByPath`
 */
export interface GetContentByPathOpt {
  /**
   * Path relative to project root of item
   */
  path: string
  /**
   * Optional schema to validated fronmatter against
   */
  schema?: SchemaObject
}

/**
 * Options for generic helper `getContent`
 */
export interface GetContentOpts {
  /**
   * Function used to get raw content from REST API.
   */
  getRaw: () => Promise&lt;GetContentRes>
  /**
   * Optional schema to validated fronmatter against
   */
  schema?: SchemaObject
}

export type GetContentRes = Pick&lt;FileListOject&lt;unknown>, 'content' | 'sha' | 'size' | 'url'> &amp; {
  encoding: string
  path: string
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="GitCMS_GitCMS.html">GitCMS</a></li><li><a href="module.exports.html">exports</a></li></ul><h3>Interfaces</h3><ul><li><a href="FileListOject.html">FileListOject</a></li><li><a href="GetContentByPathOpt.html">GetContentByPathOpt</a></li><li><a href="GetContentByShaOpt.html">GetContentByShaOpt</a></li><li><a href="GetContentOpts.html">GetContentOpts</a></li><li><a href="GitCMSSettings.html">GitCMSSettings</a></li><li><a href="ListFilesOptions.html">ListFilesOptions</a></li></ul><h3>Global</h3><ul><li><a href="global.html#getItemByPath">getItemByPath</a></li><li><a href="global.html#getItemBySha">getItemBySha</a></li><li><a href="global.html#listItems">listItems</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Mon Mar 25 2024 14:28:10 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
